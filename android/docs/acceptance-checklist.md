# Info Push Android 准发布验收清单

> 工作目录：`apps/info-push/android`

## 0. 构建与基础检查

- [ ] 执行单测：`./gradlew --no-daemon :app:testDebugUnitTest`
- [ ] 执行构建：`./gradlew --no-daemon :app:assembleDebug`
- [ ] Debug APK 产物存在：`app/build/outputs/apk/debug/app-debug.apk`
- [ ] 底部导航切换正常（首页/信息源/收藏/设置），返回栈符合预期
- [ ] 设置页进入“消息中心”后可返回设置页

---

## 1) 设置页导入导出（系统文件选择器）

- [ ] 点击“导出 JSON 到文件”可唤起系统创建文件面板
- [ ] 成功写入 JSON 文件，提示文案正确
- [ ] 点击“文件导入（replace）”可唤起系统选文件面板并完成 replace 导入
- [ ] 点击“文件导入（merge）”可唤起系统选文件面板并完成 merge 导入
- [ ] 保留文本框导入能力（replace/merge）作为兜底
- [ ] 导出 JSON 包含 `version / exportedAt / data`

---

## 2) 时间展示可读性

- [ ] Feed/Favorites/Messages 时间格式符合：`xx分钟前 / 今天 HH:mm / yyyy-MM-dd`
- [ ] 非法时间字符串不崩溃，回退到原值或“时间未知”

---

## 3) 四主页面视觉统一（首页/信息源/收藏/设置）

- [ ] 页面统一内边距（横向 16dp、纵向 12dp）
- [ ] 页面标题层级统一（`headlineSmall`）
- [ ] 列表项统一卡片样式与间距（`ElevatedCard` + 12dp 内边距）
- [ ] 主次按钮关系统一（主操作 `Button`，次操作 `OutlinedButton`）

---

## 4) AI 去重增强（URL 归一化）

- [ ] AI 搜索结果中同一 URL 的不同写法不会重复展示
- [ ] 一键添加前会基于 URL 归一化与本地已有信息源做去重
- [ ] 重复时返回“已添加/重复”而非重复落库

---

## 5) 信息源全链路回归

- [ ] 新增本地信息源成功
- [ ] AI 搜索并“一键添加”成功
- [ ] 首页“同步远端首页/刷新当前源”成功
- [ ] 首页可看到对应信息流
- [ ] 信息源 URL 打开正常

---

## 6) 收藏与消息回归

- [ ] 收藏页可同步、可打开原文
- [ ] 消息页可同步、可从正文/标题提取链接并打开
- [ ] mock 回退提示在收藏/消息页可见

---

## 7) 导入导出与链接打开回归

- [ ] 文件导出 -> 删除部分数据 -> 文件导入（replace）可恢复
- [ ] 文件导出 -> 新增数据 -> 文件导入（merge）可合并
- [ ] Feed/Sources/Favorites/Messages 的链接打开均可调用外部浏览器

---

## 8) 结果记录

- [ ] 记录测试环境（设备/模拟器、系统版本）
- [ ] 记录 APK 路径与构建时间
- [ ] 记录已知限制与后续待办

---

## 本次版本说明

- 完成准发布前稳定性回归收尾，重点覆盖：
  - 信息源添加（手动/AI）准入判定与错误提示链路
  - 首页切源与刷新（同步远端首页 / 刷新当前源）
  - 收藏增删与收藏页实时过滤
  - 首页/收藏页“打开原文”统一走内置浏览器
  - 内置浏览器工具栏动作：后退、前进、刷新、外部打开、收藏、分享、复制
- 小修两处明显体验问题（无大改）：
  - 信息源手动新增时先做输入 trim，仅在名称与 URL 均非空时清空输入框，避免校验失败后误清空
  - 内置浏览器分享动作增加失败兜底提示（`无法分享链接`），避免无可处理 Activity 时静默失败
- 产物校验：单测与 Debug 构建均通过，可用于准发布联调与验收。
